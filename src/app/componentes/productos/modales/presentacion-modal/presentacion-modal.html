@if (visible) {
<div class="modal-overlay">
    <div class="modal-content animate__animated animate__fadeInDown">
        <div class="modal-header">
            <h2 class="modal-titulo">{{ modoEdicion() ? 'Editar presentación' : 'Crear presentación' }}</h2>
            <button class="btn-close-modal" (click)="cerrar()">
                <i class="bi bi-x-circle-fill" [style.color]="colorSistema"></i>
            </button>
        </div>

        <div class="modal-body">
            <div class="row g-3 mb-4">
                <div class="col-md-4">
                    <label class="form-label">Presentación<span class="text-danger">*</span></label>
                    <input type="text" class="form-control" [(ngModel)]="nuevaUnidad.NombreUnidad"
                        placeholder="Nombre (Ej. Unidad)">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Abr.<span class="text-danger">*</span></label>
                    <input type="text" class="form-control" [(ngModel)]="nuevaUnidad.Abreviatura" placeholder="Ej. Un">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Estado<span class="text-danger">*</span></label>
                    <select class="form-select" [(ngModel)]="nuevaUnidad.Estatus">
                        <option [ngValue]="1">Activo</option>
                        <option [ngValue]="0">Inactivo</option>
                    </select>
                </div>
                <div class="col-md-3 d-flex align-items-end">
                    <button class="btn btn-agregar w-100 text-white fw-bold py-2"
                        [style.background-color]="colorSistema" (click)="guardar()">
                        {{ modoEdicion() ? 'Actualizar' : 'Guardar' }}
                    </button>
                </div>
            </div>

            <div class="table-container shadow-sm rounded border overflow-hidden">
                <table class="table align-middle m-0">
                    <thead>
                        <tr>
                            <th>Presentacion <i class="bi bi-arrow-down-up"></i></th>
                            <th>Estado <i class="bi bi-arrow-down-up"></i></th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (uni of unidadesPaginadas(); track uni.CodigoUnidadMedida) {
                        <tr [class.text-danger]="uni.Estatus === 0">
                            <td>{{ uni.NombreUnidad }} ({{ uni.Abreviatura }})</td>
                            <td>{{ uni.Estatus === 1 ? 'Activo' : 'Inactivo' }}</td>
                            <td class="text-center">
                                <button class="btn-action" (click)="editar(uni)" title="Editar">
                                    <i class="bi bi-pencil-square"></i>
                                </button>
                                <button class="btn-action text-danger" (click)="eliminar(uni.CodigoUnidadMedida!)"
                                    title="Eliminar">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="pagination-mini mt-3 d-flex justify-content-end">
                <nav aria-label="Page navigation">
                    <ul class="pagination pagination-sm m-0">
                        <li class="page-item" [class.disabled]="paginaActual() === 1">
                            <button class="page-link" (click)="irAPagina(paginaActual() - 1)">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                        </li>

                        @for (p of paginas; track p) {
                        <li class="page-item" [class.active]="paginaActual() === p">
                            <button class="page-link" (click)="irAPagina(p)"
                                [style.background-color]="paginaActual() === p ? colorSistema : ''"
                                [style.border-color]="paginaActual() === p ? colorSistema : ''">
                                {{ p }}
                            </button>
                        </li>
                        }

                        <li class="page-item" [class.disabled]="paginaActual() === totalPaginas()">
                            <button class="page-link" (click)="irAPagina(paginaActual() + 1)">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
}